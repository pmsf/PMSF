{"version":3,"sources":["../../js/map.js"],"names":["$selectExclude","$selectPokemonNotify","$selectRarityNotify","$textPerfectionNotify","$selectStyle","$selectIconResolution","$selectIconSize","$selectOpenGymsOnly","$selectTeamGymsOnly","$selectLastUpdateGymsOnly","$selectMinGymLevel","$selectMaxGymLevel","$selectLuredPokestopsOnly","$selectGymMarkerStyle","$selectLocationIconMarker","$switchGymSidebar","language","document","documentElement","lang","idToPokemon","i8lnDictionary","languageLookups","languageLookupThreshold","searchMarkerStyles","timestamp","excludedPokemon","notifiedPokemon","notifiedRarity","notifiedMinPerfection","buffer","reincludedPokemon","reids","map","rawDataIsLoading","locationMarker","rangeMarkers","storeZoom","scanPath","moves","oSwLat","oSwLng","oNeLat","oNeLng","lastpokestops","lastgyms","lastpokemon","lastslocs","lastspawns","selectedStyle","updateWorker","lastUpdateTime","gymTypes","gymPrestige","audio","Audio","genderType","unownForm","notifyIvTitle","notifyNoIvTitle","notifyText","excludePokemon","id","val","concat","trigger","notifyAboutPokemon","removePokemonMarker","encounterId","mapData","pokemons","marker","rangeCircle","setMap","hidden","initMap","google","maps","Map","getElementById","center","lat","centerLat","lng","centerLng","zoom","Store","get","fullscreenControl","streetViewControl","mapTypeControl","clickableIcons","mapTypeControlOptions","style","MapTypeControlStyle","DROPDOWN_MENU","position","ControlPosition","RIGHT_TOP","mapTypeIds","MapTypeId","ROADMAP","SATELLITE","HYBRID","styleNoLabels","StyledMapType","noLabelsStyle","name","mapTypes","set","styleDark","darkStyle","styleLight2","light2Style","stylePgo","pGoStyle","styleDarkNl","darkStyleNoLabels","styleLight2Nl","light2StyleNoLabels","stylePgoNl","pGoStyleNoLabels","stylePgoDay","pGoStyleDay","stylePgoNight","pGoStyleNight","currentDate","Date","currentHour","getHours","stylePgoDynamic","addListener","s","mapTypeId","setMapTypeId","updateMap","getZoom","redrawPokemon","lurePokemons","createMyLocationButton","initSidebar","updateLocationMarker","setIcon","icon","createLocationMarker","Marker","animation","Animation","DROP","draggable","optimized","zIndex","MAX_ZINDEX","infoWindow","InfoWindow","content","disableAutoPan","addListeners","event","newLocation","getPosition","$","prop","toggle","searchBox","places","Autocomplete","css","place","getPlace","geometry","loc","location","changeLocation","icons","each","pokemonSprites","key","value","append","attr","text","pad","number","slice","getTypeSpan","type","openMapDirections","url","window","open","getDateStr","t","dateStr","moment","format","pokemonLabel","item","rarityDisplay","types","typesDisplay","latitude","longitude","disappearTime","disappearDate","atk","def","sta","pMove1","undefined","i8ln","pMove2","weight","height","gender","form","cp","cpMultiplier","level","index","details","iv","getIv","toFixed","pokemonLevel","getPokemonLevel","contentstring","getMinutes","getSeconds","gymLabel","teamName","teamId","gymPoints","lastScanned","arguments","length","lastModified","members","guardPokemon","memberStr","i","pokemon_name","trainer_name","trainer_level","pokemon_id","pokemon_cp","lastModifiedStr","lastScannedStr","directionsStr","nameStr","gymColor","str","gymLevel","getGymLevel","points","pokestopLabel","expireTime","expireDate","formatSpawnTime","seconds","Math","floor","substr","spawnpointLabel","time","special","addRangeCircle","targetmap","circleCenter","LatLng","gymColors","teamColor","range","circleColor","rangeCircleOpts","radius","strokeWeight","strokeColor","strokeOpacity","fillColor","fillOpacity","Circle","isRangeActive","stm","round","lpad","len","padstr","Array","max","String","join","repArray","find","replace","getTimeUntil","now","tdiff","sec","min","hour","getNotifyText","ntitle","dist","toLocaleString","minute","second","hour12","until","udist","ntext","customizePokemonMarker","skipNotification","setAnimation","animationDisabled","indexOf","play","sendNotification","fav_title","fav_text","BOUNCE","perfection","setupGymMarker","scaledSize","Size","gymSidebar","querySelector","getAttribute","classList","contains","remove","setAttribute","showGymDetails","persist","isMobileDevice","isTouchDevice","clearSelection","updateLabelDiffTime","close","updateGymMarker","setContent","updateGymIcons","gyms","setupPokestopMarker","imagename","getColorByDate","diff","hue","toString","setupScannedMarker","clickable","getColorBySpawnTime","changeSpawnIcon","color","urlColor","zoomScale","minimumSize","newSize","newIcon","anchor","Point","spawnPointIndex","newIndex","scale","setupSpawnpointMarker","selection","empty","getSelection","removeAllRanges","infoWindowIsOpen","clearStaleMarkers","getTime","scanned","showInBoundsMarkers","markers","show","getBounds","intersects","team_id","getMap","oldAnimation","getAnimation","loadRawData","loadPokemon","loadGyms","loadPokestops","loadScanned","loadSpawnpoints","loadLuredOnly","Boolean","bounds","swPoint","getSouthWest","nePoint","getNorthEast","swLat","swLng","neLat","neLng","ajax","timeout","data","dataType","cache","beforeSend","error","toastr","options","complete","processPokemons","setupPokemonMarker","processPokestops","pokestops","item2","updatePokestops","removeStops","currentTime","push","processGyms","gym_points","removeGymFromMap","gymid","gymHasOpenSpot","pokemonInGym","pokemon","closePrestige","last_scanned","last_modified","processScanned","scanId","updateScanned","setOptions","processSpawnpoints","spawnpoints","updateSpawnPoints","setZIndex","getCenter","done","result","hasClass","countMarkers","filter","e","drawScanPath","scanPathPoints","idx","point","Polyline","path","geodesic","pokemonList","newMarker","element","disappearsAt","parseInt","hours","minutes","timestring","ttime","getPointDistance","pointA","pointB","spherical","computeDistanceBetween","title","Notification","permission","requestPermission","notification","body","sound","onclick","focus","centerMap","locationContainer","createElement","locationButton","backgroundColor","border","outline","width","borderRadius","boxShadow","cursor","marginRight","padding","appendChild","locationIcon","margin","backgroundImage","backgroundSize","backgroundPosition","backgroundRepeat","addEventListener","centerMapOnLocation","controls","RIGHT_BOTTOM","currentLocation","imgX","animationInterval","setInterval","navigator","geolocation","getCurrentPosition","latlng","coords","setPosition","setCenter","clearInterval","setZoom","word","isEmptyObject","async","success","jqXHR","status","_error","console","log","updateGeoLocation","panTo","createUpdateWorker","Worker","updateBlob","Blob","updateBlobURL","URL","createObjectURL","onmessage","postMessage","ex","message","sidebar","sidebarClose","add","nextLvlPrestige","prestigePercentage","freeSlots","freeSlotsStr","gymLevelStr","pokemonHtml","headerHtml","perfectPercent","iv_attack","iv_defense","iv_stamina","moveEnergy","move_2_energy","move_1_name","move_1_type","toLowerCase","move_1_damage","move_2_name","move_2_type","move_2_damage","guard_pokemon_id","guard_pokemon_name","innerHTML","href","className","tabIndex","preventDefault","stopPropagation","toggleGymPokemonDetails","lastElementChild","firstElementChild","nextElementSibling","err","getJSON","styleList","select2","placeholder","minimumResultsForSearch","Infinity","on","checked","d","dType","searchMarkerStyleList","formatState","state","$state","numberOfPokemon","pokeList","_types","pokemonType","templateResult","Number","isNaN","buildSwitchChangeListener","storageKey","change","wrapper","hide","wrapper2","bind","setDraggable","accordion","active","collapsible","heightStyle","DataTable","paging","searching","info","errMode","order"],"mappings":"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","file":"map.built.js","sourcesContent":["//\n// Global map.js variables\n//\n\nvar $selectExclude\nvar $selectPokemonNotify\nvar $selectRarityNotify\nvar $textPerfectionNotify\nvar $selectStyle\nvar $selectIconResolution\nvar $selectIconSize\nvar $selectOpenGymsOnly\nvar $selectTeamGymsOnly\nvar $selectLastUpdateGymsOnly\nvar $selectMinGymLevel\nvar $selectMaxGymLevel\nvar $selectLuredPokestopsOnly\nvar $selectGymMarkerStyle\nvar $selectLocationIconMarker\nvar $switchGymSidebar\n\nvar language = document.documentElement.lang === '' ? 'en' : document.documentElement.lang\nvar idToPokemon = {}\nvar i8lnDictionary = {}\nvar languageLookups = 0\nvar languageLookupThreshold = 3\n\nvar searchMarkerStyles\n\nvar timestamp\nvar excludedPokemon = []\nvar notifiedPokemon = []\nvar notifiedRarity = []\nvar notifiedMinPerfection = null\n\nvar buffer = []\nvar reincludedPokemon = []\nvar reids = []\n\nvar map\nvar rawDataIsLoading = false\nvar locationMarker\nvar rangeMarkers = ['pokemon', 'pokestop', 'gym']\nvar storeZoom = true\nvar scanPath\nvar moves\n\nvar oSwLat\nvar oSwLng\nvar oNeLat\nvar oNeLng\n\nvar lastpokestops\nvar lastgyms\nvar lastpokemon\nvar lastslocs\nvar lastspawns\n\nvar selectedStyle = 'light'\n\nvar updateWorker\nvar lastUpdateTime\n\nvar gymTypes = ['Uncontested', 'Mystic', 'Valor', 'Instinct']\nvar gymPrestige = [2000, 4000, 8000, 12000, 16000, 20000, 30000, 40000, 50000]\nvar audio = new Audio('static/sounds/ding.mp3')\n\nvar genderType = ['', '', '']\nvar unownForm = ['unset', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', '!', '?']\n\n/*\n text place holders:\n <pkm> - pokemon name\n <prc> - iv in percent without percent symbol\n <atk> - attack as number\n <def> - defense as number\n <sta> - stamnia as number\n */\nvar notifyIvTitle = '<pkm> <prc>% (<atk>/<def>/<sta>)'\nvar notifyNoIvTitle = '<pkm>'\n\n/*\n text place holders:\n <dist>  - disappear time\n <udist> - time until disappear\n */\nvar notifyText = 'disappears at <dist> (<udist>)'\n\n//\n// Functions\n//\n\nfunction excludePokemon(id) { // eslint-disable-line no-unused-vars\n    $selectExclude.val(\n        $selectExclude.val().concat(id)\n    ).trigger('change')\n}\n\nfunction notifyAboutPokemon(id) { // eslint-disable-line no-unused-vars\n    $selectPokemonNotify.val(\n        $selectPokemonNotify.val().concat(id)\n    ).trigger('change')\n}\n\nfunction removePokemonMarker(encounterId) { // eslint-disable-line no-unused-vars\n    if (mapData.pokemons[encounterId].marker.rangeCircle) {\n        mapData.pokemons[encounterId].marker.rangeCircle.setMap(null)\n        delete mapData.pokemons[encounterId].marker.rangeCircle\n    }\n    mapData.pokemons[encounterId].marker.setMap(null)\n    mapData.pokemons[encounterId].hidden = true\n}\n\nfunction initMap() { // eslint-disable-line no-unused-vars\n    map = new google.maps.Map(document.getElementById('map'), {\n        center: {\n            lat: centerLat,\n            lng: centerLng\n        },\n        zoom: zoom == null ? Store.get('zoomLevel') : zoom,\n        fullscreenControl: true,\n        streetViewControl: false,\n        mapTypeControl: false,\n        clickableIcons: false,\n        mapTypeControlOptions: {\n            style: google.maps.MapTypeControlStyle.DROPDOWN_MENU,\n            position: google.maps.ControlPosition.RIGHT_TOP,\n            mapTypeIds: [\n                google.maps.MapTypeId.ROADMAP,\n                google.maps.MapTypeId.SATELLITE,\n                google.maps.MapTypeId.HYBRID,\n                'nolabels_style',\n                'dark_style',\n                'style_light2',\n                'style_pgo',\n                'dark_style_nl',\n                'style_light2_nl',\n                'style_pgo_nl',\n                'style_pgo_day',\n                'style_pgo_night',\n                'style_pgo_dynamic'\n            ]\n        }\n    })\n\n    var styleNoLabels = new google.maps.StyledMapType(noLabelsStyle, {\n        name: 'No Labels'\n    })\n    map.mapTypes.set('nolabels_style', styleNoLabels)\n\n    var styleDark = new google.maps.StyledMapType(darkStyle, {\n        name: 'Dark'\n    })\n    map.mapTypes.set('dark_style', styleDark)\n\n    var styleLight2 = new google.maps.StyledMapType(light2Style, {\n        name: 'Light2'\n    })\n    map.mapTypes.set('style_light2', styleLight2)\n\n    var stylePgo = new google.maps.StyledMapType(pGoStyle, {\n        name: 'PokemonGo'\n    })\n    map.mapTypes.set('style_pgo', stylePgo)\n\n    var styleDarkNl = new google.maps.StyledMapType(darkStyleNoLabels, {\n        name: 'Dark (No Labels)'\n    })\n    map.mapTypes.set('dark_style_nl', styleDarkNl)\n\n    var styleLight2Nl = new google.maps.StyledMapType(light2StyleNoLabels, {\n        name: 'Light2 (No Labels)'\n    })\n    map.mapTypes.set('style_light2_nl', styleLight2Nl)\n\n    var stylePgoNl = new google.maps.StyledMapType(pGoStyleNoLabels, {\n        name: 'PokemonGo (No Labels)'\n    })\n    map.mapTypes.set('style_pgo_nl', stylePgoNl)\n\n    var stylePgoDay = new google.maps.StyledMapType(pGoStyleDay, {\n        name: 'PokemonGo Day'\n    })\n    map.mapTypes.set('style_pgo_day', stylePgoDay)\n\n    var stylePgoNight = new google.maps.StyledMapType(pGoStyleNight, {\n        name: 'PokemonGo Night'\n    })\n    map.mapTypes.set('style_pgo_night', stylePgoNight)\n\n    // dynamic map style chooses stylePgoDay or stylePgoNight depending on client time\n    var currentDate = new Date()\n    var currentHour = currentDate.getHours()\n    var stylePgoDynamic = currentHour >= 6 && currentHour < 19 ? stylePgoDay : stylePgoNight\n    map.mapTypes.set('style_pgo_dynamic', stylePgoDynamic)\n\n    map.addListener('maptypeid_changed', function (s) {\n        Store.set('map_style', this.mapTypeId)\n    })\n\n    map.setMapTypeId(Store.get('map_style'))\n    map.addListener('idle', updateMap)\n\n    map.addListener('zoom_changed', function () {\n        if (storeZoom === true) {\n            Store.set('zoomLevel', this.getZoom())\n        } else {\n            storeZoom = true\n        }\n\n        redrawPokemon(mapData.pokemons)\n        redrawPokemon(mapData.lurePokemons)\n    })\n\n    createMyLocationButton()\n    initSidebar()\n}\n\nfunction updateLocationMarker(style) {\n    if (style in searchMarkerStyles) {\n        locationMarker.setIcon(searchMarkerStyles[style].icon)\n        Store.set('locationMarkerStyle', style)\n    }\n    return locationMarker\n}\n\nfunction createLocationMarker() {\n    var position = Store.get('followMyLocationPosition')\n    var lat = 'lat' in position ? position.lat : centerLat\n    var lng = 'lng' in position ? position.lng : centerLng\n\n    var locationMarker = new google.maps.Marker({\n        map: map,\n        animation: google.maps.Animation.DROP,\n        position: {\n            lat: lat,\n            lng: lng\n        },\n        draggable: false,\n        icon: null,\n        optimized: false,\n        zIndex: google.maps.Marker.MAX_ZINDEX + 2\n    })\n\n    locationMarker.setIcon(searchMarkerStyles[Store.get('locationMarkerStyle')].icon)\n\n    locationMarker.infoWindow = new google.maps.InfoWindow({\n        content: '<div><b>My Location</b></div>',\n        disableAutoPan: true\n    })\n\n    addListeners(locationMarker)\n\n    google.maps.event.addListener(locationMarker, 'dragend', function () {\n        var newLocation = locationMarker.getPosition()\n        Store.set('followMyLocationPosition', {\n            lat: newLocation.lat(),\n            lng: newLocation.lng()\n        })\n    })\n\n    return locationMarker\n}\n\nfunction initSidebar() {\n    $('#gyms-switch').prop('checked', Store.get('showGyms'))\n    $('#gym-sidebar-switch').prop('checked', Store.get('useGymSidebar'))\n    $('#gym-sidebar-wrapper').toggle(Store.get('showGyms'))\n    $('#gyms-filter-wrapper').toggle(Store.get('showGyms'))\n    $('#team-gyms-only-switch').val(Store.get('showTeamGymsOnly'))\n    $('#open-gyms-only-switch').val(Store.get('showOpenGymsOnly'))\n    $('#min-level-gyms-filter-switch').val(Store.get('minGymLevel'))\n    $('#max-level-gyms-filter-switch').val(Store.get('maxGymLevel'))\n    $('#last-update-gyms-switch').val(Store.get('showLastUpdatedGymsOnly'))\n    $('#pokemon-switch').prop('checked', Store.get('showPokemon'))\n    $('#pokestops-switch').prop('checked', Store.get('showPokestops'))\n    $('#lured-pokestops-only-switch').val(Store.get('showLuredPokestopsOnly'))\n    $('#lured-pokestops-only-wrapper').toggle(Store.get('showPokestops'))\n    $('#start-at-user-location-switch').prop('checked', Store.get('startAtUserLocation'))\n    $('#start-at-last-location-switch').prop('checked', Store.get('startAtLastLocation'))\n    $('#follow-my-location-switch').prop('checked', Store.get('followMyLocation'))\n    $('#scanned-switch').prop('checked', Store.get('showScanned'))\n    $('#spawnpoints-switch').prop('checked', Store.get('showSpawnpoints'))\n    $('#ranges-switch').prop('checked', Store.get('showRanges'))\n    $('#sound-switch').prop('checked', Store.get('playSound'))\n    if (document.getElementById('next-location')) {\n        var searchBox = new google.maps.places.Autocomplete(document.getElementById('next-location'))\n        $('#next-location').css('background-color', $('#geoloc-switch').prop('checked') ? '#e0e0e0' : '#ffffff')\n\n        searchBox.addListener('place_changed', function () {\n            var place = searchBox.getPlace()\n\n            if (!place.geometry) return\n\n            var loc = place.geometry.location\n            changeLocation(loc.lat(), loc.lng())\n        })\n    }\n\n    var icons = $('#pokemon-icons')\n    $.each(pokemonSprites, function (key, value) {\n        icons.append($('<option></option>').attr('value', key).text(value.name))\n    })\n    icons.val(pokemonSprites[Store.get('pokemonIcons')] ? Store.get('pokemonIcons') : 'highres')\n\n    $('#pokemon-icon-size').val(Store.get('iconSizeModifier'))\n}\n\nfunction pad(number) {\n    return number <= 99 ? ('0' + number).slice(-2) : number\n}\n\nfunction getTypeSpan(type) {\n    return '<span style=\\'padding: 2px 5px text-transform: uppercase color: white margin-right: 2px border-radius: 4px font-size: 0.8em vertical-align: text-bottom background-color: ' + type['color'] + '\\'>' + type['type'] + '</span>'\n}\n\nfunction openMapDirections(lat, lng) { // eslint-disable-line no-unused-vars\n    var url = 'https://www.google.com/maps/?daddr=' + lat + ',' + lng\n    window.open(url, '_blank')\n}\n\n// Converts timestamp to readable String\nfunction getDateStr(t) {\n    var dateStr = 'Unknown'\n    if (t) {\n        dateStr = moment(t).format('DD-MM-YYYY, HH:mm:ss')\n    }\n    return dateStr\n}\n\nfunction pokemonLabel(item) {\n    var name = item['pokemon_name']\n    var rarityDisplay = item['pokemon_rarity'] ? '(' + item['pokemon_rarity'] + ')' : ''\n    var types = item['pokemon_types']\n    var typesDisplay = ''\n    var encounterId = item['encounter_id']\n    var id = item['pokemon_id']\n    var latitude = item['latitude']\n    var longitude = item['longitude']\n    var disappearTime = item['disappear_time']\n    var disappearDate = new Date(disappearTime)\n    var atk = item['individual_attack']\n    var def = item['individual_defense']\n    var sta = item['individual_stamina']\n    var pMove1 = moves[item['move_1']] !== undefined ? i8ln(moves[item['move_1']]['name']) : 'gen/unknown'\n    var pMove2 = moves[item['move_2']] !== undefined ? i8ln(moves[item['move_2']]['name']) : 'gen/unknown'\n    var weight = item['weight']\n    var height = item['height']\n    var gender = item['gender']\n    var form = item['form']\n    var cp = item['cp']\n    var cpMultiplier = item['cp_multiplier']\n    var level = item['level']\n\n    $.each(types, function (index, type) {\n        typesDisplay += getTypeSpan(type)\n    })\n\n    var details = ''\n    if (atk != null && def != null && sta != null) {\n        var iv = getIv(atk, def, sta)\n        details =\n            '<div>' +\n            'IV: ' + iv.toFixed(1) + '% (' + atk + '/' + def + '/' + sta + ')' +\n            '</div>'\n\n        if (cp != null && (cpMultiplier != null || level != null)) {\n            var pokemonLevel\n            if (level != null) {\n                pokemonLevel = level\n            } else {\n                pokemonLevel = getPokemonLevel(cpMultiplier)\n            }\n            details +=\n                '<div>' +\n                'CP: ' + cp + ' | Level: ' + pokemonLevel +\n                '</div>'\n        }\n\n        details +=\n            '<div>' +\n            'Moves: ' + pMove1 + ' / ' + pMove2 +\n            '</div>'\n    }\n    if (gender != null) {\n        details +=\n            '<div>' +\n            'Gender: ' + genderType[gender - 1]\n        if (weight != null && height != null) {\n            details += ' | Weight: ' + weight.toFixed(2) + 'kg | Height: ' + height.toFixed(2) + 'm'\n        }\n        details +=\n            '</div>'\n    }\n    var contentstring =\n        '<div>' +\n        '<b>' + name + '</b>'\n    if (id === 201 && form !== null && form > 0) {\n        contentstring += ' (' + unownForm[item['form']] + ')'\n    }\n    contentstring += '<span> - </span>' +\n        '<small>' +\n        '<a href=\"http://www.pokemon.com/us/pokedex/' + id + '\" target=\"_blank\" title=\"View in Pokedex\">#' + id + '</a>' +\n        '</small>' +\n        '<span> ' + rarityDisplay + '</span>' +\n        '<span> - </span>' +\n        '<small>' + typesDisplay + '</small>' +\n        '</div>' +\n        '<div>' +\n        'Disappears at ' + pad(disappearDate.getHours()) + ':' + pad(disappearDate.getMinutes()) + ':' + pad(disappearDate.getSeconds()) +\n        '<span class=\"label-countdown\" disappears-at=\"' + disappearTime + '\">(00m00s)</span>' +\n        '</div>' +\n        '<div>' +\n        'Location: ' + latitude.toFixed(6) + ', ' + longitude.toFixed(7) +\n        '</div>' +\n        details +\n        '<div>' +\n        '<a href=\"javascript:excludePokemon(' + id + ')\">Exclude</a>&nbsp&nbsp' +\n        '<a href=\"javascript:notifyAboutPokemon(' + id + ')\">Notify</a>&nbsp&nbsp' +\n        '<a href=\"javascript:removePokemonMarker\\'\"' + encounterId + '\\')\">Remove</a>&nbsp&nbsp' +\n        '<a href=\"javascript:void(0)\" onclick=\"javascript:openMapDirections(' + latitude + ', ' + longitude + ')\" title=\"View in Maps\">Get directions</a>' +\n        '</div>'\n    return contentstring\n}\n\nfunction gymLabel(teamName, teamId, gymPoints, latitude, longitude) {\n    var lastScanned = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null\n    var lastModified = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : null\n    var name = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : null\n    var members = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : []\n    // var gymId = arguments[9]\n    var guardPokemon = arguments[10]\n\n    var memberStr = ''\n    if (members.length > 0) {\n        for (var i = 0; i < members.length; i++) {\n            memberStr +=\n                '<span class=\"gym-member\" title=\"' + members[i].pokemon_name + ' | ' + members[i].trainer_name + ' (Lvl ' + members[i].trainer_level + '\">' +\n                '<i class=\"pokemon-sprite n' + members[i].pokemon_id + '\"></i>' +\n                '<span class=\"cp team-' + teamId + '\">' + members[i].pokemon_cp + '</span>' +\n                '</span>'\n        }\n    } else {\n        memberStr =\n            '<span class=\"gym-member\">' +\n            '<i class=\"pokemon-sprite n' + guardPokemon + '\"></i>' +\n            '</span>'\n    }\n\n    var lastModifiedStr = getDateStr(lastModified)\n    var lastScannedStr = ''\n    if (lastScanned != null) {\n        lastScannedStr =\n            '<div>' +\n            'Last Scanned: ' + getDateStr(lastScanned) +\n            '</div>'\n    }\n    var directionsStr = ''\n    if (!Store.get('useGymSidebar')) {\n        directionsStr =\n            '<div>' +\n            '<a href=\\'javascript:void(0)\\' onclick=\\'javascript:openMapDirections(' + latitude + ',' + longitude + ')\\' title=\\'View in Maps\\'>Get directions</a>' +\n            '</div>'\n    }\n\n    var nameStr = name ? '<div>' + name + '</div>' : ''\n\n    var gymColor = ['0, 0, 0, .4', '74, 138, 202, .6', '240, 68, 58, .6', '254, 217, 40, .6']\n    var str\n    if (teamId === 0) {\n        str = '<div> ' +\n            '<center>' +\n            '<div>' +\n            '<b style=\"color:rgba(' + gymColor[teamId] + ')\">' + teamName + '</b><br>' +\n            '<img height=\"70px\" style=\"padding: 5px\" src=\"static/forts/' + teamName + '_large.png\">' +\n            '</div>' +\n            nameStr +\n            '<div>' +\n            'Location: ' + latitude.toFixed(6) + ', ' + longitude.toFixed(7) +\n            '</div>' +\n            '<div>' +\n            'Last Modified: ' + lastModifiedStr +\n            '</div>' +\n            lastScannedStr +\n            directionsStr +\n            '</center>' +\n            '</div>'\n    } else {\n        var gymLevel = getGymLevel(gymPoints)\n        str =\n            '<div>' +\n            '<center>' +\n            '<div style=\"padding-bottom: 2px\">' +\n            'Gym owned by:' +\n            '</div>' +\n            '<div>' +\n            '<b style=\"color:rgba(' + gymColor[teamId] + ')\">Team ' + teamName + '</b><br>' +\n            '<img height=\"70px\" style=\"padding: 5px\" src=\"static/forts/' + teamName + '_large.png\">' +\n            '</div>' +\n            '<div>' +\n            nameStr +\n            '</div>' +\n            '<div>' +\n            'Level: ' + gymLevel + ' | Prestige: ' + gymPoints + '/' + (gymPrestige[gymLevel - 1] || 50000) +\n            '</div>' +\n            '<div>' + memberStr +\n            '</div>' +\n            '<div>' +\n            'Location: ' + latitude.toFixed(6) + ', ' + longitude.toFixed(7) +\n            '</div>' +\n            '<div>' +\n            'Last Modified: ' + lastModifiedStr +\n            '</div>' + lastScannedStr +\n            directionsStr +\n            '</center>' +\n            '</div>'\n    }\n\n    return str\n}\n\nfunction getGymLevel(points) {\n    var level = 1\n    while (points >= gymPrestige[level - 1]) {\n        level++\n    }\n\n    return level\n}\n\nfunction pokestopLabel(expireTime, latitude, longitude) {\n    var str\n    if (expireTime) {\n        var expireDate = new Date(expireTime)\n\n        str =\n            '<div>' +\n            '<b>Lured Pokstop</b>' +\n            '</div>' +\n            '<div>' +\n            'Lure expires at ' + pad(expireDate.getHours()) + ':' + pad(expireDate.getMinutes()) + ':' + pad(expireDate.getSeconds()) +\n            '<span class=\"label-countdown\" disappears-at=\"' + expireTime + '\">(00m00s)</span>' +\n            '</div>' +\n            '<div>' +\n            'Location: ' + latitude.toFixed(6) + ', ' + longitude.toFixed(7) +\n            '</div>' +\n            '<div>' +\n            '<a href=\"javascript:void(0)\" onclick=\"javascript:openMapDirections(' + latitude + ',' + longitude + ')\" title=\"View in Maps\">Get directions</a>' +\n            '</div>'\n    } else {\n        str =\n            '<div>' +\n            '<b>Pokstop</b>' +\n            '</div>' +\n            '<div>' +\n            'Location: ' + latitude.toFixed(6) + ', ' + longitude.toFixed(7) +\n            '</div>' +\n            '<div>' +\n            '<a href=\"javascript:void(0)\" onclick=\"javascript:openMapDirections(' + latitude + ',' + longitude + ')\" title=\"View in Maps\">Get directions</a>' +\n            '</div>'\n    }\n\n    return str\n}\n\nfunction formatSpawnTime(seconds) {\n    // the addition and modulo are required here because the db stores when a spawn disappears\n    // the subtraction to get the appearance time will knock seconds under 0 if the spawn happens in the previous hour\n    return ('0' + Math.floor((seconds + 3600) % 3600 / 60)).substr(-2) + ':' + ('0' + seconds % 60).substr(-2)\n}\n\nfunction spawnpointLabel(item) {\n    var str =\n        '<div>' +\n        '<b>Spawn Point</b>' +\n        '</div>' +\n        '<div>' +\n        'Every hour from ' + formatSpawnTime(item.time) + ' to ' + formatSpawnTime(item.time + 900) +\n        '</div>'\n\n    if (item.special) {\n        str +=\n            '<div>' +\n            'May appear as early as ' + formatSpawnTime(item.time - 1800) +\n            '</div>'\n    }\n    return str\n}\n\nfunction addRangeCircle(marker, map, type, teamId) {\n    var targetmap = null\n    var circleCenter = new google.maps.LatLng(marker.position.lat(), marker.position.lng())\n    var gymColors = ['#999999', '#0051CF', '#FF260E', '#FECC23'] // 'Uncontested', 'Mystic', 'Valor', 'Instinct']\n    var teamColor = gymColors[0]\n    if (teamId) teamColor = gymColors[teamId]\n\n    var range\n    var circleColor\n\n    // handle each type of marker and be explicit about the range circle attributes\n    switch (type) {\n        case 'pokemon':\n            circleColor = '#C233F2'\n            range = 40 // pokemon appear at 40m and then you can move away. still have to be 40m close to see it though, so ignore the further disappear distance\n            break\n        case 'pokestop':\n            circleColor = '#3EB0FF'\n            range = 40\n            break\n        case 'gym':\n            circleColor = teamColor\n            range = 40\n            break\n    }\n\n    if (map) targetmap = map\n\n    var rangeCircleOpts = {\n        map: targetmap,\n        radius: range, // meters\n        strokeWeight: 1,\n        strokeColor: circleColor,\n        strokeOpacity: 0.9,\n        center: circleCenter,\n        fillColor: circleColor,\n        fillOpacity: 0.3\n    }\n    var rangeCircle = new google.maps.Circle(rangeCircleOpts)\n    return rangeCircle\n}\n\nfunction isRangeActive(map) {\n    if (map.getZoom() < 16) return false\n    return Store.get('showRanges')\n}\n\nfunction getIv(atk, def, stm) {\n    if (atk !== null) {\n        return 100.0 * (atk + def + stm) / 45\n    }\n\n    return false\n}\n\nfunction getPokemonLevel(cpMultiplier) {\n    if (cpMultiplier < 0.734) {\n        var pokemonLevel = 58.35178527 * cpMultiplier * cpMultiplier - 2.838007664 * cpMultiplier + 0.8539209906\n    } else {\n        pokemonLevel = 171.0112688 * cpMultiplier - 95.20425243\n    }\n    pokemonLevel = Math.round(pokemonLevel) * 2 / 2\n\n    return pokemonLevel\n}\n\nfunction lpad(str, len, padstr) {\n    return Array(Math.max(len - String(str).length + 1, 0)).join(padstr) + str\n}\n\nfunction repArray(text, find, replace) {\n    for (var i = 0; i < find.length; i++) {\n        text = text.replace(find[i], replace[i])\n    }\n\n    return text\n}\n\nfunction getTimeUntil(time) {\n    var now = +new Date()\n    var tdiff = time - now\n\n    var sec = Math.floor(tdiff / 1000 % 60)\n    var min = Math.floor(tdiff / 1000 / 60 % 60)\n    var hour = Math.floor(tdiff / (1000 * 60 * 60) % 24)\n\n    return {\n        'total': tdiff,\n        'hour': hour,\n        'min': min,\n        'sec': sec,\n        'now': now,\n        'ttime': time\n    }\n}\n\nfunction getNotifyText(item) {\n    var iv = getIv(item['individual_attack'], item['individual_defense'], item['individual_stamina'])\n    var find = ['<prc>', '<pkm>', '<atk>', '<def>', '<sta>']\n    var replace = [iv ? iv.toFixed(1) : '', item['pokemon_name'], item['individual_attack'], item['individual_defense'], item['individual_stamina']]\n    var ntitle = repArray(iv ? notifyIvTitle : notifyNoIvTitle, find, replace)\n    var dist = new Date(item['disappear_time']).toLocaleString([], {\n        hour: '2-digit', minute: '2-digit',\n        second: '2-digit', hour12: false\n    })\n    var until = getTimeUntil(item['disappear_time'])\n    var udist = until.hour > 0 ? until.hour + ':' : ''\n    udist += lpad(until.min, 2, 0) + 'm' + lpad(until.sec, 2, 0) + 's'\n    find = ['<dist>', '<udist>']\n    replace = [dist, udist]\n    var ntext = repArray(notifyText, find, replace)\n\n    return {\n        'fav_title': ntitle,\n        'fav_text': ntext\n    }\n}\n\nfunction customizePokemonMarker(marker, item, skipNotification) {\n    marker.addListener('click', function () {\n        this.setAnimation(null)\n        this.animationDisabled = true\n    })\n\n    if (!marker.rangeCircle && isRangeActive(map)) {\n        marker.rangeCircle = addRangeCircle(marker, map, 'pokemon')\n    }\n\n    marker.infoWindow = new google.maps.InfoWindow({\n        content: pokemonLabel(item),\n        disableAutoPan: true\n    })\n\n    if (notifiedPokemon.indexOf(item['pokemon_id']) > -1 || notifiedRarity.indexOf(item['pokemon_rarity']) > -1) {\n        if (!skipNotification) {\n            if (Store.get('playSound')) {\n                audio.play()\n            }\n            sendNotification(getNotifyText(item).fav_title, getNotifyText(item).fav_text, 'static/icons/' + item['pokemon_id'] + '.png', item['latitude'], item['longitude'])\n        }\n        if (marker.animationDisabled !== true) {\n            marker.setAnimation(google.maps.Animation.BOUNCE)\n        }\n    }\n\n    if (item['individual_attack'] != null) {\n        var perfection = getIv(item['individual_attack'], item['individual_defense'], item['individual_stamina'])\n        if (notifiedMinPerfection > 0 && perfection >= notifiedMinPerfection) {\n            if (!skipNotification) {\n                if (Store.get('playSound')) {\n                    audio.play()\n                }\n                sendNotification(getNotifyText(item).fav_title, getNotifyText(item).fav_text, 'static/icons/' + item['pokemon_id'] + '.png', item['latitude'], item['longitude'])\n            }\n            if (marker.animationDisabled !== true) {\n                marker.setAnimation(google.maps.Animation.BOUNCE)\n            }\n        }\n    }\n\n    addListeners(marker)\n}\n\nfunction setupGymMarker(item) {\n    var marker = new google.maps.Marker({\n        position: {\n            lat: item['latitude'],\n            lng: item['longitude']\n        },\n        map: map,\n        icon: {\n            url: 'static/forts/' + Store.get('gymMarkerStyle') + '/' + gymTypes[item['team_id']] + (item['team_id'] !== 0 ? '_' + getGymLevel(item['gym_points']) : '') + '.png',\n            scaledSize: new google.maps.Size(48, 48)\n        }\n    })\n\n    if (!marker.rangeCircle && isRangeActive(map)) {\n        marker.rangeCircle = addRangeCircle(marker, map, 'gym', item['team_id'])\n    }\n\n    marker.infoWindow = new google.maps.InfoWindow({\n        content: gymLabel(gymTypes[item['team_id']], item['team_id'], item['gym_points'], item['latitude'], item['longitude'], item['last_scanned'], item['last_modified'], item['name'], item['pokemon'], item['gym_id'], item['guard_pokemon_id']),\n        disableAutoPan: true\n    })\n\n    if (Store.get('useGymSidebar')) {\n        marker.addListener('click', function () {\n            var gymSidebar = document.querySelector('#gym-details')\n            if (gymSidebar.getAttribute('data-id') === item['gym_id'] && gymSidebar.classList.contains('visible')) {\n                gymSidebar.classList.remove('visible')\n            } else {\n                gymSidebar.setAttribute('data-id', item['gym_id'])\n                showGymDetails(item['gym_id'])\n            }\n        })\n\n        google.maps.event.addListener(marker.infoWindow, 'closeclick', function () {\n            marker.persist = null\n        })\n\n        if (!isMobileDevice() && !isTouchDevice()) {\n            marker.addListener('mouseover', function () {\n                marker.infoWindow.open(map, marker)\n                clearSelection()\n                updateLabelDiffTime()\n            })\n        }\n\n        marker.addListener('mouseout', function () {\n            if (!marker.persist) {\n                marker.infoWindow.close()\n            }\n        })\n    } else {\n        addListeners(marker)\n    }\n    return marker\n}\n\nfunction updateGymMarker(item, marker) {\n    marker.setIcon({\n        url: 'static/forts/' + Store.get('gymMarkerStyle') + '/' + gymTypes[item['team_id']] + (item['team_id'] !== 0 ? '_' + getGymLevel(item['gym_points']) : '') + '.png',\n        scaledSize: new google.maps.Size(48, 48)\n    })\n    marker.infoWindow.setContent(gymLabel(gymTypes[item['team_id']], item['team_id'], item['gym_points'], item['latitude'], item['longitude'], item['last_scanned'], item['last_modified'], item['name'], item['pokemon'], item['gym_id'], item['guard_pokemon_id']))\n    return marker\n}\n\nfunction updateGymIcons() {\n    $.each(mapData.gyms, function (key, value) {\n        mapData.gyms[key]['marker'].setIcon({\n            url: 'static/forts/' + Store.get('gymMarkerStyle') + '/' + gymTypes[mapData.gyms[key]['team_id']] + (mapData.gyms[key]['team_id'] !== 0 ? '_' + getGymLevel(mapData.gyms[key]['gym_points']) : '') + '.png',\n            scaledSize: new google.maps.Size(48, 48)\n        })\n    })\n}\n\nfunction setupPokestopMarker(item) {\n    var imagename = item['lure_expiration'] ? 'PstopLured' : 'Pstop'\n    var marker = new google.maps.Marker({\n        position: {\n            lat: item['latitude'],\n            lng: item['longitude']\n        },\n        map: map,\n        zIndex: 2,\n        icon: 'static/forts/' + imagename + '.png'\n    })\n\n    if (!marker.rangeCircle && isRangeActive(map)) {\n        marker.rangeCircle = addRangeCircle(marker, map, 'pokestop')\n    }\n\n    marker.infoWindow = new google.maps.InfoWindow({\n        content: pokestopLabel(item['lure_expiration'], item['latitude'], item['longitude']),\n        disableAutoPan: true\n    })\n\n    addListeners(marker)\n    return marker\n}\n\nfunction getColorByDate(value) {\n    // Changes the color from red to green over 15 mins\n    var diff = (Date.now() - value) / 1000 / 60 / 15\n\n    if (diff > 1) {\n        diff = 1\n    }\n\n    // value from 0 to 1 - Green to Red\n    var hue = ((1 - diff) * 120).toString(10)\n    return ['hsl(', hue, ',100%,50%)'].join('')\n}\n\nfunction setupScannedMarker(item) {\n    var circleCenter = new google.maps.LatLng(item['latitude'], item['longitude'])\n\n    var marker = new google.maps.Circle({\n        map: map,\n        clickable: false,\n        center: circleCenter,\n        radius: 70, // metres\n        fillColor: getColorByDate(item['last_modified']),\n        fillOpacity: 0.1,\n        strokeWeight: 1,\n        strokeOpacity: 0.5\n    })\n\n    return marker\n}\n\nfunction getColorBySpawnTime(value) {\n    var now = new Date()\n    var seconds = now.getMinutes() * 60 + now.getSeconds()\n\n    // account for hour roll-over\n    if (seconds < 900 && value > 2700) {\n        seconds += 3600\n    } else if (seconds > 2700 && value < 900) {\n        value += 3600\n    }\n\n    var diff = seconds - value\n    var hue = 275 // light purple when spawn is neither about to spawn nor active\n    if (diff >= 0 && diff <= 900) {\n        // green to red over 15 minutes of active spawn\n        hue = (1 - diff / 60 / 15) * 120\n    } else if (diff < 0 && diff > -300) {\n        // light blue to dark blue over 5 minutes til spawn\n        hue = (1 - -diff / 60 / 5) * 50 + 200\n    }\n\n    hue = Math.round(hue / 5) * 5\n\n    return hue\n}\n\nfunction changeSpawnIcon(color, zoom) {\n    var urlColor = ''\n    if (color === 275) {\n        urlColor = './static/icons/hsl-275-light.png'\n    } else {\n        urlColor = './static/icons/hsl-' + color + '.png'\n    }\n    var zoomScale = 1.6 // adjust this value to change the size of the spawnpoint icons\n    var minimumSize = 1\n    var newSize = Math.round(zoomScale * (zoom - 10) // this scales the icon based on zoom\n    )\n    if (newSize < minimumSize) {\n        newSize = minimumSize\n    }\n\n    var newIcon = {\n        url: urlColor,\n        scaledSize: new google.maps.Size(newSize, newSize),\n        anchor: new google.maps.Point(newSize / 2, newSize / 2)\n    }\n\n    return newIcon\n}\n\nfunction spawnPointIndex(color) {\n    var newIndex = 1\n    var scale = 0\n    if (color >= 0 && color <= 120) {\n        // high to low over 15 minutes of active spawn\n        scale = color / 120\n        newIndex = 100 + scale * 100\n    } else if (color >= 200 && color <= 250) {\n        // low to high over 5 minutes til spawn\n        scale = (color - 200) / 50\n        newIndex = scale * 100\n    }\n\n    return newIndex\n}\n\nfunction setupSpawnpointMarker(item) {\n    var circleCenter = new google.maps.LatLng(item['latitude'], item['longitude'])\n    var hue = getColorBySpawnTime(item.time)\n    var zoom = map.getZoom()\n\n    var marker = new google.maps.Marker({\n        map: map,\n        position: circleCenter,\n        icon: changeSpawnIcon(hue, zoom),\n        zIndex: spawnPointIndex(hue)\n    })\n\n    marker.infoWindow = new google.maps.InfoWindow({\n        content: spawnpointLabel(item),\n        disableAutoPan: true,\n        position: circleCenter\n    })\n\n    addListeners(marker)\n\n    return marker\n}\n\nfunction clearSelection() {\n    if (document.selection) {\n        document.selection.empty()\n    } else if (window.getSelection) {\n        window.getSelection().removeAllRanges()\n    }\n}\n\nfunction addListeners(marker) {\n    marker.addListener('click', function () {\n        if (!marker.infoWindowIsOpen) {\n            marker.infoWindow.open(map, marker)\n            clearSelection()\n            updateLabelDiffTime()\n            marker.persist = true\n            marker.infoWindowIsOpen = true\n        } else {\n            marker.persist = null\n            marker.infoWindow.close()\n            marker.infoWindowIsOpen = false\n        }\n    })\n\n    google.maps.event.addListener(marker.infoWindow, 'closeclick', function () {\n        marker.persist = null\n    })\n\n    if (!isMobileDevice() && !isTouchDevice()) {\n        marker.addListener('mouseover', function () {\n            marker.infoWindow.open(map, marker)\n            clearSelection()\n            updateLabelDiffTime()\n        })\n    }\n\n    marker.addListener('mouseout', function () {\n        if (!marker.persist) {\n            marker.infoWindow.close()\n        }\n    })\n\n    return marker\n}\n\nfunction clearStaleMarkers() {\n    $.each(mapData.pokemons, function (key, value) {\n        if (mapData.pokemons[key]['disappear_time'] < new Date().getTime() || excludedPokemon.indexOf(mapData.pokemons[key]['pokemon_id']) >= 0) {\n            if (mapData.pokemons[key].marker.rangeCircle) {\n                mapData.pokemons[key].marker.rangeCircle.setMap(null)\n                delete mapData.pokemons[key].marker.rangeCircle\n            }\n            mapData.pokemons[key].marker.setMap(null)\n            delete mapData.pokemons[key]\n        }\n    })\n\n    $.each(mapData.lurePokemons, function (key, value) {\n        if (mapData.lurePokemons[key]['lure_expiration'] < new Date().getTime() || excludedPokemon.indexOf(mapData.lurePokemons[key]['pokemon_id']) >= 0) {\n            mapData.lurePokemons[key].marker.setMap(null)\n            delete mapData.lurePokemons[key]\n        }\n    })\n\n    $.each(mapData.scanned, function (key, value) {\n        // If older than 15mins remove\n        if (mapData.scanned[key]['last_modified'] < new Date().getTime() - 15 * 60 * 1000) {\n            mapData.scanned[key].marker.setMap(null)\n            delete mapData.scanned[key]\n        }\n    })\n}\n\nfunction showInBoundsMarkers(markers, type) {\n    $.each(markers, function (key, value) {\n        var marker = markers[key].marker\n        var show = false\n        if (!markers[key].hidden) {\n            if (typeof marker.getBounds === 'function') {\n                if (map.getBounds().intersects(marker.getBounds())) {\n                    show = true\n                }\n            } else if (typeof marker.getPosition === 'function') {\n                if (map.getBounds().contains(marker.getPosition())) {\n                    show = true\n                }\n            }\n        }\n        // marker has an associated range\n        if (show && rangeMarkers.indexOf(type) !== -1) {\n            // no range circle yet...let's create one\n            if (!marker.rangeCircle) {\n                // but only if range is active\n                if (isRangeActive(map)) {\n                    if (type === 'gym') marker.rangeCircle = addRangeCircle(marker, map, type, markers[key].team_id)\n                    else marker.rangeCircle = addRangeCircle(marker, map, type)\n                }\n            } else {\n                // there's already a range circle\n                if (isRangeActive(map)) {\n                    marker.rangeCircle.setMap(map)\n                } else {\n                    marker.rangeCircle.setMap(null)\n                }\n            }\n        }\n\n        if (show && !marker.getMap()) {\n            marker.setMap(map\n                // Not all markers can be animated (ex: scan locations)\n            )\n            if (marker.setAnimation && marker.oldAnimation) {\n                marker.setAnimation(marker.oldAnimation)\n            }\n        } else if (!show && marker.getMap()) {\n            // Not all markers can be animated (ex: scan locations)\n            if (marker.getAnimation) {\n                marker.oldAnimation = marker.getAnimation()\n            }\n            if (marker.rangeCircle) marker.rangeCircle.setMap(null)\n            marker.setMap(null)\n        }\n    })\n}\n\nfunction loadRawData() {\n    var loadPokemon = Store.get('showPokemon')\n    var loadGyms = Store.get('showGyms')\n    var loadPokestops = Store.get('showPokestops')\n    var loadScanned = Store.get('showScanned')\n    var loadSpawnpoints = Store.get('showSpawnpoints')\n    var loadLuredOnly = Boolean(Store.get('showLuredPokestopsOnly'))\n\n    var bounds = map.getBounds()\n    var swPoint = bounds.getSouthWest()\n    var nePoint = bounds.getNorthEast()\n    var swLat = swPoint.lat()\n    var swLng = swPoint.lng()\n    var neLat = nePoint.lat()\n    var neLng = nePoint.lng()\n\n    return $.ajax({\n        url: 'raw_data',\n        type: 'GET',\n        timeout: 300000,\n        data: {\n            'timestamp': timestamp,\n            'pokemon': loadPokemon,\n            'lastpokemon': lastpokemon,\n            'pokestops': loadPokestops,\n            'lastpokestops': lastpokestops,\n            'luredonly': loadLuredOnly,\n            'gyms': loadGyms,\n            'lastgyms': lastgyms,\n            'scanned': loadScanned,\n            'lastslocs': lastslocs,\n            'spawnpoints': loadSpawnpoints,\n            'lastspawns': lastspawns,\n            'swLat': swLat,\n            'swLng': swLng,\n            'neLat': neLat,\n            'neLng': neLng,\n            'oSwLat': oSwLat,\n            'oSwLng': oSwLng,\n            'oNeLat': oNeLat,\n            'oNeLng': oNeLng,\n            'reids': String(reincludedPokemon),\n            'eids': String(excludedPokemon)\n        },\n        dataType: 'json',\n        cache: false,\n        beforeSend: function beforeSend() {\n            if (rawDataIsLoading) {\n                return false\n            } else {\n                rawDataIsLoading = true\n            }\n        },\n        error: function error() {\n            // Display error toast\n            toastr['error']('Please check connectivity or reduce marker settings.', 'Error getting data')\n            toastr.options = {\n                'closeButton': true,\n                'debug': false,\n                'newestOnTop': true,\n                'progressBar': false,\n                'positionClass': 'toast-top-right',\n                'preventDuplicates': true,\n                'onclick': null,\n                'showDuration': '300',\n                'hideDuration': '1000',\n                'timeOut': '25000',\n                'extendedTimeOut': '1000',\n                'showEasing': 'swing',\n                'hideEasing': 'linear',\n                'showMethod': 'fadeIn',\n                'hideMethod': 'fadeOut'\n            }\n        },\n        complete: function complete() {\n            rawDataIsLoading = false\n        }\n    })\n}\n\nfunction processPokemons(i, item) {\n    if (!Store.get('showPokemon')) {\n        return false // in case the checkbox was unchecked in the meantime.\n    }\n\n    if (!(item['encounter_id'] in mapData.pokemons) && excludedPokemon.indexOf(item['pokemon_id']) < 0 && item['disappear_time'] > Date.now()) {\n        // add marker to map and item to dict\n        if (item.marker) {\n            item.marker.setMap(null)\n        }\n        if (!item.hidden) {\n            item.marker = setupPokemonMarker(item, map)\n            customizePokemonMarker(item.marker, item)\n            mapData.pokemons[item['encounter_id']] = item\n        }\n    }\n}\n\nfunction processPokestops(i, item) {\n    if (!Store.get('showPokestops')) {\n        return false\n    }\n\n    if (Store.get('showLuredPokestopsOnly') && !item['lure_expiration']) {\n        return true\n    }\n\n    if (!mapData.pokestops[item['pokestop_id']]) {\n        // new pokestop, add marker to map and item to dict\n        if (item.marker && item.marker.rangeCircle) {\n            item.marker.rangeCircle.setMap(null)\n        }\n        if (item.marker) {\n            item.marker.setMap(null)\n        }\n        item.marker = setupPokestopMarker(item)\n        mapData.pokestops[item['pokestop_id']] = item\n    } else {\n        // change existing pokestop marker to unlured/lured\n        var item2 = mapData.pokestops[item['pokestop_id']]\n        if (!!item['lure_expiration'] !== !!item2['lure_expiration']) {\n            if (item2.marker && item2.marker.rangeCircle) {\n                item2.marker.rangeCircle.setMap(null)\n            }\n            item2.marker.setMap(null)\n            item.marker = setupPokestopMarker(item)\n            mapData.pokestops[item['pokestop_id']] = item\n        }\n    }\n}\n\nfunction updatePokestops() {\n    if (!Store.get('showPokestops')) {\n        return false\n    }\n\n    var removeStops = []\n    var currentTime = new Date().getTime()\n\n    // change lured pokestop marker to unlured when expired\n    $.each(mapData.pokestops, function (key, value) {\n        if (value['lure_expiration'] && value['lure_expiration'] < currentTime) {\n            value['lure_expiration'] = null\n            if (value.marker && value.marker.rangeCircle) {\n                value.marker.rangeCircle.setMap(null)\n            }\n            value.marker.setMap(null)\n            value.marker = setupPokestopMarker(value)\n        }\n    })\n\n    // remove unlured stops if show lured only is selected\n    if (Store.get('showLuredPokestopsOnly')) {\n        $.each(mapData.pokestops, function (key, value) {\n            if (!value['lure_expiration']) {\n                removeStops.push(key)\n            }\n        })\n        $.each(removeStops, function (key, value) {\n            if (mapData.pokestops[value] && mapData.pokestops[value].marker) {\n                if (mapData.pokestops[value].marker.rangeCircle) {\n                    mapData.pokestops[value].marker.rangeCircle.setMap(null)\n                }\n                mapData.pokestops[value].marker.setMap(null)\n                delete mapData.pokestops[value]\n            }\n        })\n    }\n}\n\nfunction processGyms(i, item) {\n    if (!Store.get('showGyms')) {\n        return false // in case the checkbox was unchecked in the meantime.\n    }\n\n    var gymLevel = getGymLevel(item.gym_points)\n    var removeGymFromMap = function removeGymFromMap(gymid) {\n        if (mapData.gyms[gymid] && mapData.gyms[gymid].marker) {\n            if (mapData.gyms[gymid].marker.rangeCircle) {\n                mapData.gyms[gymid].marker.rangeCircle.setMap(null)\n            }\n            mapData.gyms[gymid].marker.setMap(null)\n            delete mapData.gyms[gymid]\n        }\n    }\n\n    var gymHasOpenSpot = function gymHasOpenSpot(gymLevel, pokemonInGym) {\n        return gymLevel > item.pokemon.length && item.pokemon.length !== 0\n    }\n\n    if (Store.get('showOpenGymsOnly') === 1) {\n        if (!gymHasOpenSpot(gymLevel, item.pokemon.length)) {\n            removeGymFromMap(item['gym_id'])\n            return true\n        }\n    }\n\n    if (Store.get('showOpenGymsOnly') > 1) {\n        var closePrestige = 0\n        switch (Store.get('showOpenGymsOnly')) {\n            case 2:\n                closePrestige = 1000\n                break\n            case 3:\n                closePrestige = 2500\n                break\n            case 4:\n                closePrestige = 5000\n                break\n        }\n\n        if (!gymHasOpenSpot(gymLevel, item.pokemon.length) && (gymPrestige[gymLevel - 1] > closePrestige + item.gym_points || gymLevel === 10)) {\n            removeGymFromMap(item['gym_id'])\n            return true\n        }\n    }\n\n    if (Store.get('showTeamGymsOnly') && Store.get('showTeamGymsOnly') !== item.team_id) {\n        removeGymFromMap(item['gym_id'])\n        return true\n    }\n\n    if (Store.get('showLastUpdatedGymsOnly')) {\n        var now = new Date()\n        if (item.last_scanned == null) {\n            if (Store.get('showLastUpdatedGymsOnly') * 3600 * 1000 + item.last_modified < now.getTime()) {\n                removeGymFromMap(item['gym_id'])\n                return true\n            }\n        } else {\n            if (Store.get('showLastUpdatedGymsOnly') * 3600 * 1000 + item.last_scanned < now.getTime()) {\n                removeGymFromMap(item['gym_id'])\n                return true\n            }\n        }\n    }\n\n    if (gymLevel < Store.get('minGymLevel')) {\n        removeGymFromMap(item['gym_id'])\n        return true\n    }\n\n    if (gymLevel > Store.get('maxGymLevel')) {\n        removeGymFromMap(item['gym_id'])\n        return true\n    }\n\n    if (item['gym_id'] in mapData.gyms) {\n        item.marker = updateGymMarker(item, mapData.gyms[item['gym_id']].marker)\n    } else {\n        // add marker to map and item to dict\n        item.marker = setupGymMarker(item)\n    }\n    mapData.gyms[item['gym_id']] = item\n}\n\nfunction processScanned(i, item) {\n    if (!Store.get('showScanned')) {\n        return false\n    }\n\n    var scanId = item['latitude'] + '|' + item['longitude']\n\n    if (!(scanId in mapData.scanned)) {\n        // add marker to map and item to dict\n        if (item.marker) {\n            item.marker.setMap(null)\n        }\n        item.marker = setupScannedMarker(item)\n        mapData.scanned[scanId] = item\n    } else {\n        mapData.scanned[scanId].last_modified = item['last_modified']\n    }\n}\n\nfunction updateScanned() {\n    if (!Store.get('showScanned')) {\n        return false\n    }\n\n    $.each(mapData.scanned, function (key, value) {\n        if (map.getBounds().intersects(value.marker.getBounds())) {\n            value.marker.setOptions({\n                fillColor: getColorByDate(value['last_modified'])\n            })\n        }\n    })\n}\n\nfunction processSpawnpoints(i, item) {\n    if (!Store.get('showSpawnpoints')) {\n        return false\n    }\n\n    var id = item['spawnpoint_id']\n\n    if (!(id in mapData.spawnpoints)) {\n        // add marker to map and item to dict\n        if (item.marker) {\n            item.marker.setMap(null)\n        }\n        item.marker = setupSpawnpointMarker(item)\n        mapData.spawnpoints[id] = item\n    }\n}\n\nfunction updateSpawnPoints() {\n    if (!Store.get('showSpawnpoints')) {\n        return false\n    }\n\n    var zoom = map.getZoom()\n\n    $.each(mapData.spawnpoints, function (key, value) {\n        if (map.getBounds().contains(value.marker.getPosition())) {\n            var hue = getColorBySpawnTime(value['time'])\n            value.marker.setIcon(changeSpawnIcon(hue, zoom))\n            value.marker.setZIndex(spawnPointIndex(hue))\n        }\n    })\n}\n\nfunction updateMap() {\n    var position = map.getCenter()\n    Store.set('startAtLastLocationPosition', {\n        lat: position.lat(),\n        lng: position.lng()\n    })\n\n    loadRawData().done(function (result) {\n        $.each(result.pokemons, processPokemons)\n        $.each(result.pokestops, processPokestops)\n        $.each(result.gyms, processGyms)\n        $.each(result.scanned, processScanned)\n        $.each(result.spawnpoints, processSpawnpoints)\n        showInBoundsMarkers(mapData.pokemons, 'pokemon')\n        showInBoundsMarkers(mapData.lurePokemons, 'pokemon')\n        showInBoundsMarkers(mapData.gyms, 'gym')\n        showInBoundsMarkers(mapData.pokestops, 'pokestop')\n        showInBoundsMarkers(mapData.scanned, 'scanned')\n        showInBoundsMarkers(mapData.spawnpoints, 'inbound'\n            //      drawScanPath(result.scanned)\n        )\n        clearStaleMarkers()\n\n        updateScanned()\n        updateSpawnPoints()\n        updatePokestops()\n\n        if ($('#stats').hasClass('visible')) {\n            countMarkers(map)\n        }\n\n        oSwLat = result.oSwLat\n        oSwLng = result.oSwLng\n        oNeLat = result.oNeLat\n        oNeLng = result.oNeLng\n\n        lastgyms = result.lastgyms\n        lastpokestops = result.lastpokestops\n        lastpokemon = result.lastpokemon\n        lastslocs = result.lastslocs\n        lastspawns = result.lastspawns\n\n        reids = result.reids\n        if (reids instanceof Array) {\n            reincludedPokemon = reids.filter(function (e) {\n                return this.indexOf(e) < 0\n            }, reincludedPokemon)\n        }\n        timestamp = result.timestamp\n        lastUpdateTime = Date.now()\n    })\n}\n\nfunction drawScanPath(points) { // eslint-disable-line no-unused-vars\n    var scanPathPoints = []\n    $.each(points, function (idx, point) {\n        scanPathPoints.push({\n            lat: point['latitude'],\n            lng: point['longitude']\n        })\n    })\n    if (scanPath) {\n        scanPath.setMap(null)\n    }\n    scanPath = new google.maps.Polyline({\n        path: scanPathPoints,\n        geodesic: true,\n        strokeColor: '#FF0000',\n        strokeOpacity: 1.0,\n        strokeWeight: 2,\n        map: map\n    })\n}\n\nfunction redrawPokemon(pokemonList) {\n    var skipNotification = true\n    $.each(pokemonList, function (key, value) {\n        var item = pokemonList[key]\n        if (!item.hidden) {\n            if (item.marker.rangeCircle) item.marker.rangeCircle.setMap(null)\n            var newMarker = setupPokemonMarker(item, map, this.marker.animationDisabled)\n            customizePokemonMarker(newMarker, item, skipNotification)\n            item.marker.setMap(null)\n            pokemonList[key].marker = newMarker\n        }\n    })\n}\n\nvar updateLabelDiffTime = function updateLabelDiffTime() {\n    $('.label-countdown').each(function (index, element) {\n        var disappearsAt = getTimeUntil(parseInt(element.getAttribute('disappears-at')))\n\n        var hours = disappearsAt.hour\n        var minutes = disappearsAt.min\n        var seconds = disappearsAt.sec\n        var timestring = ''\n\n        if (disappearsAt.ttime < disappearsAt.now) {\n            timestring = '(expired)'\n        } else {\n            timestring = '('\n            if (hours > 0) {\n                timestring = hours + 'h'\n            }\n\n            timestring += lpad(minutes, 2, 0) + 'm'\n            timestring += lpad(seconds, 2, 0) + 's'\n            timestring += ')'\n        }\n\n        $(element).text(timestring)\n    })\n}\n\nfunction getPointDistance(pointA, pointB) {\n    return google.maps.geometry.spherical.computeDistanceBetween(pointA, pointB)\n}\n\nfunction sendNotification(title, text, icon, lat, lng) {\n    if (!('Notification' in window)) {\n        return false // Notifications are not present in browser\n    }\n\n    if (Notification.permission !== 'granted') {\n        Notification.requestPermission()\n    } else {\n        var notification = new Notification(title, {\n            icon: icon,\n            body: text,\n            sound: 'sounds/ding.mp3'\n        })\n\n        notification.onclick = function () {\n            window.focus()\n            notification.close()\n\n            centerMap(lat, lng, 20)\n        }\n    }\n}\n\nfunction createMyLocationButton() {\n    var locationContainer = document.createElement('div')\n\n    var locationButton = document.createElement('button')\n    locationButton.style.backgroundColor = '#fff'\n    locationButton.style.border = 'none'\n    locationButton.style.outline = 'none'\n    locationButton.style.width = '28px'\n    locationButton.style.height = '28px'\n    locationButton.style.borderRadius = '2px'\n    locationButton.style.boxShadow = '0 1px 4px rgba(0,0,0,0.3)'\n    locationButton.style.cursor = 'pointer'\n    locationButton.style.marginRight = '10px'\n    locationButton.style.padding = '0px'\n    locationButton.title = 'My Location'\n    locationContainer.appendChild(locationButton)\n\n    var locationIcon = document.createElement('div')\n    locationIcon.style.margin = '5px'\n    locationIcon.style.width = '18px'\n    locationIcon.style.height = '18px'\n    locationIcon.style.backgroundImage = 'url(static/mylocation-sprite-1x.png)'\n    locationIcon.style.backgroundSize = '180px 18px'\n    locationIcon.style.backgroundPosition = '0px 0px'\n    locationIcon.style.backgroundRepeat = 'no-repeat'\n    locationIcon.id = 'current-location'\n    locationButton.appendChild(locationIcon)\n\n    locationButton.addEventListener('click', function () {\n        centerMapOnLocation()\n    })\n\n    locationContainer.index = 1\n    map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(locationContainer)\n\n    google.maps.event.addListener(map, 'dragend', function () {\n        var currentLocation = document.getElementById('current-location')\n        currentLocation.style.backgroundPosition = '0px 0px'\n    })\n}\n\nfunction centerMapOnLocation() {\n    var currentLocation = document.getElementById('current-location')\n    if (currentLocation !== null) {\n        var imgX = '0'\n        var animationInterval = setInterval(function () {\n            if (imgX === '-18') {\n                imgX = '0'\n            } else {\n                imgX = '-18'\n            }\n            currentLocation.style.backgroundPosition = imgX + 'px 0'\n        }, 500)\n    }\n    if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(function (position) {\n            var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude)\n            locationMarker.setPosition(latlng)\n            map.setCenter(latlng)\n            Store.set('followMyLocationPosition', {\n                lat: position.coords.latitude,\n                lng: position.coords.longitude\n            })\n            clearInterval(animationInterval)\n            if (currentLocation !== null) {\n                currentLocation.style.backgroundPosition = '-144px 0px'\n            }\n        })\n    } else {\n        clearInterval(animationInterval)\n        if (currentLocation !== null) {\n            currentLocation.style.backgroundPosition = '0px 0px'\n        }\n    }\n}\n\nfunction changeLocation(lat, lng) {\n    var loc = new google.maps.LatLng(lat, lng)\n    map.setCenter(loc)\n}\n\nfunction centerMap(lat, lng, zoom) {\n    var loc = new google.maps.LatLng(lat, lng)\n\n    map.setCenter(loc)\n\n    if (zoom) {\n        storeZoom = false\n        map.setZoom(zoom)\n    }\n}\n\nfunction i8ln(word) {\n    if ($.isEmptyObject(i8lnDictionary) && language !== 'en' && languageLookups < languageLookupThreshold) {\n        $.ajax({\n            url: 'static/dist/locales/' + language + '.min.json',\n            dataType: 'json',\n            async: false,\n            success: function success(data) {\n                i8lnDictionary = data\n            },\n            error: function error(jqXHR, status, _error) {\n                console.log('Error loading i8ln dictionary: ' + _error)\n                languageLookups++\n            }\n        })\n    }\n    if (word in i8lnDictionary) {\n        return i8lnDictionary[word]\n    } else {\n        // Word doesn't exist in dictionary return it as is\n        return word\n    }\n}\n\nfunction updateGeoLocation() {\n    if (navigator.geolocation && Store.get('followMyLocation')) {\n        navigator.geolocation.getCurrentPosition(function (position) {\n            var lat = position.coords.latitude\n            var lng = position.coords.longitude\n            var center = new google.maps.LatLng(lat, lng)\n\n            if (Store.get('followMyLocation')) {\n                if (typeof locationMarker !== 'undefined' && getPointDistance(locationMarker.getPosition(), center) >= 5) {\n                    map.panTo(center)\n                    locationMarker.setPosition(center)\n                    Store.set('followMyLocationPosition', {\n                        lat: lat,\n                        lng: lng\n                    })\n                }\n            }\n        })\n    }\n}\n\nfunction createUpdateWorker() {\n    try {\n        if (isMobileDevice() && window.Worker) {\n            var updateBlob = new Blob([\"onmessage = function(e) {\\n                var data = e.data\\n                if (data.name === 'backgroundUpdate') {\\n                    self.setInterval(function () {self.postMessage({name: 'backgroundUpdate'})}, 5000)\\n                }\\n            }\"])\n\n            var updateBlobURL = window.URL.createObjectURL(updateBlob)\n\n            updateWorker = new Worker(updateBlobURL)\n\n            updateWorker.onmessage = function (e) {\n                var data = e.data\n                if (document.hidden && data.name === 'backgroundUpdate' && Date.now() - lastUpdateTime > 2500) {\n                    updateMap()\n                    updateGeoLocation()\n                }\n            }\n\n            updateWorker.postMessage({\n                name: 'backgroundUpdate'\n            })\n        }\n    } catch (ex) {\n        console.log('Webworker error: ' + ex.message)\n    }\n}\n\nfunction showGymDetails(id) {\n    // eslint-disable-line no-unused-vars\n    var sidebar = document.querySelector('#gym-details')\n    var sidebarClose\n\n    sidebar.classList.add('visible')\n\n    var data = $.ajax({\n        url: 'gym_data',\n        type: 'GET',\n        timeout: 300000,\n        data: {\n            'id': id\n        },\n        dataType: 'json',\n        cache: false\n    })\n\n    data.done(function (result) {\n        var gymLevel = getGymLevel(result.gym_points)\n        var nextLvlPrestige = gymPrestige[gymLevel - 1] || 50000\n        var prestigePercentage = result.gym_points / nextLvlPrestige * 100\n        var lastModifiedStr = getDateStr(result.last_modified)\n        var lastScannedStr = ''\n        if (result.last_scanned != null) {\n            lastScannedStr =\n                '<div style=\"font-size: .7em\">' +\n                'Last Scanned: ' + getDateStr(result.last_scanned) +\n                '</div>'\n        }\n        var pokemon = result.pokemon !== undefined ? result.pokemon : []\n        var freeSlots = pokemon.length ? gymLevel - pokemon.length : 0\n        var freeSlotsStr = freeSlots ? ' - ' + freeSlots + ' Free Slots' : ''\n        var gymLevelStr = ''\n\n        if (result.team_id === 0) {\n            gymLevelStr =\n                '<center class=\"team-' + result.team_id + '-text\">' +\n                '<b class=\"team-' + result.team_id + '-text\">Uncontested - 1 Free Slot</b>' +\n                '</center>'\n        } else {\n            gymLevelStr =\n                '<div>' +\n                '<b class=\"team-' + result.team_id + '-text\">Level ' + gymLevel + freeSlotsStr + '</b>' +\n                '</div>'\n        }\n\n        var pokemonHtml = ''\n\n        var headerHtml =\n            '<center class=\"team-' + result.team_id + '-text\">' +\n            '<div>' +\n            '<b class=\"team-' + result.team_id + '-text\">' + (result.name || '') + '</b>' +\n            '</div>' +\n            '<img height=\"100px\" style=\"padding: 5px\" src=\"static/forts/' + gymTypes[result.team_id] + '_large.png\">' +\n            '<div class=\"prestige-bar team-' + result.team_id + '\">' +\n            '<div class=\"prestige team-' + result.team_id + '\" style=\"width: ' + prestigePercentage + '%\">' +\n            '</div>' +\n            '</div>' +\n            '<div>' +\n            result.gym_points + '/' + nextLvlPrestige +\n            '</div>' +\n            gymLevelStr +\n            '<div style=\"font-size: .7em\">' +\n            'Last Modified: ' + lastModifiedStr +\n            '</div>' +\n            lastScannedStr +\n            '<div>' +\n            '<a href=\\'javascript:void(0)\\' onclick=\\'javascript:openMapDirections(' + result.latitude + ',' + result.longitude + ')\\' title=\\'View in Maps\\'>Get directions</a>' +\n            '</div>' +\n            '</center>'\n\n        if (pokemon.length) {\n            $.each(pokemon, function (i, pokemon) {\n                var perfectPercent = getIv(pokemon.iv_attack, pokemon.iv_defense, pokemon.iv_stamina)\n                var moveEnergy = Math.round(100 / pokemon.move_2_energy)\n\n                pokemonHtml +=\n                    '<tr onclick=toggleGymPokemonDetails(this)>' +\n                    '<td width=\"30px\">' +\n                    '<i class=\"pokemon-sprite n' + pokemon.pokemon_id + '\"></i>' +\n                    '</td>' +\n                    '<td class=\"team-' + result.team_id + '-text\">' +\n                    '<div style=\"line-height:1em\">' + pokemon.pokemon_name + '</div>' +\n                    '<div class=\"cp\">CP ' + pokemon.pokemon_cp + '</div>' +\n                    '</td>' +\n                    '<td width=\"190\" class=\"team-' + result.team_id + '-text\" align=\"center\">' +\n                    '<div class=\"trainer-level\">' + pokemon.trainer_level + '</div>' +\n                    '<div style=\"line-height: 1em\">' + pokemon.trainer_name + '</div>' +\n                    '</td>' +\n                    '<td width=\"10\">' +\n                    '<!--<a href=\"#\" onclick=\"toggleGymPokemonDetails(this)\">-->' +\n                    '<i class=\"team-' + result.team_id + '-text fa fa-angle-double-down\"></i>' +\n                    '<!--</a>-->' +\n                    '</td>' +\n                    '</tr>' +\n                    '<tr class=\"details\">' +\n                    '<td colspan=\"2\">' +\n                    '<div class=\"ivs\">' +\n                    '<div class=\"iv\">' +\n                    '<div class=\"type\">ATK</div>' +\n                    '<div class=\"value\">' +\n                    pokemon.iv_attack +\n                    '</div>' +\n                    '</div>' +\n                    '<div class=\"iv\">' +\n                    '<div class=\"type\">DEF</div>' +\n                    '<div class=\"value\">' +\n                    pokemon.iv_defense +\n                    '</div>' +\n                    '</div>' +\n                    '<div class=\"iv\">' +\n                    '<div class=\"type\">STA</div>' +\n                    '<div class=\"value\">' +\n                    pokemon.iv_stamina +\n                    '</div>' +\n                    '</div>' +\n                    '<div class=\"iv\" style=\"width: 36px\">' +\n                    '<div class=\"type\">PERFECT</div>' +\n                    '<div class=\"value\">' +\n                    perfectPercent.toFixed(0) + '' +\n                    '<span style=\"font-size: .6em\">%</span>' +\n                    '</div>' +\n                    '</div>' +\n                    '</div>' +\n                    '</td>' +\n                    '<td colspan=\"2\">' +\n                    '<div class=\"moves\">' +\n                    '<div class=\"move\">' +\n                    '<div class=\"name\">' +\n                    pokemon.move_1_name +\n                    ' <div class=\"type ' + pokemon.move_1_type.toLowerCase() + '\">' + pokemon.move_1_type + '</div>' +\n                    '</div>' +\n                    '<div class=\"damage\">' +\n                    pokemon.move_1_damage +\n                    '</div>' +\n                    '</div>' +\n                    '<br>' +\n                    '<div class=\"move\">' +\n                    '<div class=\"name\">' +\n                    pokemon.move_2_name +\n                    ' <div class=\"type ' + pokemon.move_2_type.toLowerCase() + '\">' + pokemon.move_2_type + '</div>' +\n                    '<div>' +\n                    '<i class=\"move-bar-sprite move-bar-sprite-' + moveEnergy + '\"></i>' +\n                    '</div>' +\n                    '</div>' +\n                    '<div class=\"damage\">' +\n                    pokemon.move_2_damage +\n                    '</div>' +\n                    '</div>' +\n                    '</div>' +\n                    '</td>' +\n                    '</tr>'\n            })\n\n            pokemonHtml = '<table><tbody>' + pokemonHtml + '</tbody></table>'\n        } else if (result.team_id === 0) {\n            pokemonHtml = ''\n        } else {\n            pokemonHtml =\n                '<center class=\"team-' + result.team_id + '-text\">' +\n                'Gym Leader:<br>' +\n                '<i class=\"pokemon-large-sprite n' + result.guard_pokemon_id + '\"></i><br>' +\n                '<b class=\"team-' + result.team_id + '-text\">' + result.guard_pokemon_name + '</b>' +\n                '<p style=\"font-size: .75em margin: 5px\">' +\n                'No additional gym information is available for this gym. Make sure you are collecting detailed gym info. If you have detailed gym info collection running, this gym\\'s Pokemon information may be out of date.' +\n                '</p>' +\n                '</center>'\n        }\n\n        sidebar.innerHTML = headerHtml + pokemonHtml\n\n        sidebarClose = document.createElement('a')\n        sidebarClose.href = '#'\n        sidebarClose.className = 'close'\n        sidebarClose.tabIndex = 0\n        sidebar.appendChild(sidebarClose)\n\n        sidebarClose.addEventListener('click', function (event) {\n            event.preventDefault()\n            event.stopPropagation()\n            sidebar.classList.remove('visible')\n        })\n    })\n}\n\nfunction toggleGymPokemonDetails(e) { // eslint-disable-line no-unused-vars\n    e.lastElementChild.firstElementChild.classList.toggle('fa-angle-double-up')\n    e.lastElementChild.firstElementChild.classList.toggle('fa-angle-double-down')\n    e.nextElementSibling.classList.toggle('visible')\n}\n\n//\n// Page Ready Exection\n//\n\n$(function () {\n    try {\n        if (!Notification) {\n            console.log('could not load notifications')\n            return\n        }\n    } catch (err) {\n    }\n\n    try {\n        if (Notification.permission !== 'granted') {\n            Notification.requestPermission()\n        }\n    } catch (err) {\n    }\n})\n\n$(function () {\n    // populate Navbar Style menu\n    $selectStyle = $('#map-style')\n\n    // Load Stylenames, translate entries, and populate lists\n    $.getJSON('static/dist/data/mapstyle.min.json').done(function (data) {\n        var styleList = []\n\n        $.each(data, function (key, value) {\n            styleList.push({\n                id: key,\n                text: i8ln(value)\n            })\n        })\n\n        // setup the stylelist\n        $selectStyle.select2({\n            placeholder: 'Select Style',\n            data: styleList,\n            minimumResultsForSearch: Infinity\n        })\n\n        // setup the list change behavior\n        $selectStyle.on('change', function (e) {\n            selectedStyle = $selectStyle.val()\n            map.setMapTypeId(selectedStyle)\n            Store.set('map_style', selectedStyle)\n        })\n\n        // recall saved mapstyle\n        $selectStyle.val(Store.get('map_style')).trigger('change')\n    })\n\n    $selectIconResolution = $('#pokemon-icons')\n\n    $selectIconResolution.select2({\n        placeholder: 'Select Icon Resolution',\n        minimumResultsForSearch: Infinity\n    })\n\n    $selectIconResolution.on('change', function () {\n        Store.set('pokemonIcons', this.value)\n        redrawPokemon(mapData.pokemons)\n        redrawPokemon(mapData.lurePokemons)\n    })\n\n    $selectIconSize = $('#pokemon-icon-size')\n\n    $selectIconSize.select2({\n        placeholder: 'Select Icon Size',\n        minimumResultsForSearch: Infinity\n    })\n\n    $selectIconSize.on('change', function () {\n        Store.set('iconSizeModifier', this.value)\n        redrawPokemon(mapData.pokemons)\n        redrawPokemon(mapData.lurePokemons)\n    })\n\n    $selectOpenGymsOnly = $('#open-gyms-only-switch')\n\n    $selectOpenGymsOnly.select2({\n        placeholder: 'Only Show Open Gyms',\n        minimumResultsForSearch: Infinity\n    })\n\n    $selectOpenGymsOnly.on('change', function () {\n        Store.set('showOpenGymsOnly', this.value)\n        lastgyms = false\n        updateMap()\n    })\n\n    $selectTeamGymsOnly = $('#team-gyms-only-switch')\n\n    $selectTeamGymsOnly.select2({\n        placeholder: 'Only Show Gyms For Team',\n        minimumResultsForSearch: Infinity\n    })\n\n    $selectTeamGymsOnly.on('change', function () {\n        Store.set('showTeamGymsOnly', this.value)\n        lastgyms = false\n        updateMap()\n    })\n\n    $selectLastUpdateGymsOnly = $('#last-update-gyms-switch')\n\n    $selectLastUpdateGymsOnly.select2({\n        placeholder: 'Only Show Gyms Last Updated',\n        minimumResultsForSearch: Infinity\n    })\n\n    $selectLastUpdateGymsOnly.on('change', function () {\n        Store.set('showLastUpdatedGymsOnly', this.value)\n        lastgyms = false\n        updateMap()\n    })\n\n    $selectMinGymLevel = $('#min-level-gyms-filter-switch')\n\n    $selectMinGymLevel.select2({\n        placeholder: 'Minimum Gym Level',\n        minimumResultsForSearch: Infinity\n    })\n\n    $selectMinGymLevel.on('change', function () {\n        Store.set('minGymLevel', this.value)\n        lastgyms = false\n        updateMap()\n    })\n\n    $selectMaxGymLevel = $('#max-level-gyms-filter-switch')\n\n    $selectMaxGymLevel.select2({\n        placeholder: 'Maximum Gym Level',\n        minimumResultsForSearch: Infinity\n    })\n\n    $selectMaxGymLevel.on('change', function () {\n        Store.set('maxGymLevel', this.value)\n        lastgyms = false\n        updateMap()\n    })\n\n    $selectLuredPokestopsOnly = $('#lured-pokestops-only-switch')\n\n    $selectLuredPokestopsOnly.select2({\n        placeholder: 'Only Show Lured Pokestops',\n        minimumResultsForSearch: Infinity\n    })\n\n    $selectLuredPokestopsOnly.on('change', function () {\n        Store.set('showLuredPokestopsOnly', this.value)\n        lastpokestops = false\n        updateMap()\n    })\n    $switchGymSidebar = $('#gym-sidebar-switch')\n\n    $switchGymSidebar.on('change', function () {\n        Store.set('useGymSidebar', this.checked)\n        lastgyms = false\n        $.each(['gyms'], function (d, dType) {\n            $.each(mapData[dType], function (key, value) {\n                // for any marker you're turning off, you'll want to wipe off the range\n                if (mapData[dType][key].marker.rangeCircle) {\n                    mapData[dType][key].marker.rangeCircle.setMap(null)\n                    delete mapData[dType][key].marker.rangeCircle\n                }\n                mapData[dType][key].marker.setMap(null)\n            })\n            mapData[dType] = {}\n        })\n        updateMap()\n    })\n\n    $selectLocationIconMarker = $('#locationmarker-style')\n\n    $.getJSON('static/dist/data/searchmarkerstyle.min.json').done(function (data) {\n        searchMarkerStyles = data\n        var searchMarkerStyleList = []\n\n        $.each(data, function (key, value) {\n            searchMarkerStyleList.push({\n                id: key,\n                text: value.name\n            })\n        })\n\n        locationMarker = createLocationMarker()\n\n        if (Store.get('startAtUserLocation')) {\n            centerMapOnLocation()\n        }\n\n        if (Store.get('startAtLastLocation')) {\n            var position = Store.get('startAtLastLocationPosition')\n            var lat = 'lat' in position ? position.lat : centerLat\n            var lng = 'lng' in position ? position.lng : centerLng\n\n            var latlng = new google.maps.LatLng(lat, lng)\n            locationMarker.setPosition(latlng)\n            map.setCenter(latlng)\n        }\n\n        $selectLocationIconMarker.select2({\n            placeholder: 'Select Location Marker',\n            data: searchMarkerStyleList,\n            minimumResultsForSearch: Infinity\n        })\n\n        $selectLocationIconMarker.on('change', function (e) {\n            Store.set('locationMarkerStyle', this.value)\n            updateLocationMarker(this.value)\n        })\n\n        $selectLocationIconMarker.val(Store.get('locationMarkerStyle')).trigger('change')\n    })\n\n    $selectGymMarkerStyle = $('#gym-marker-style')\n\n    $selectGymMarkerStyle.select2({\n        placeholder: 'Select Style',\n        minimumResultsForSearch: Infinity\n    })\n\n    $selectGymMarkerStyle.on('change', function (e) {\n        Store.set('gymMarkerStyle', this.value)\n        updateGymIcons()\n    })\n\n    $selectGymMarkerStyle.val(Store.get('gymMarkerStyle')).trigger('change')\n})\n\n$(function () {\n    function formatState(state) {\n        if (!state.id) {\n            return state.text\n        }\n        var $state = $('<span><i class=\"pokemon-sprite n' + state.element.value.toString() + '\"></i> ' + state.text + '</span>')\n        return $state\n    }\n\n    $.getJSON('static/dist/data/moves.min.json').done(function (data) {\n        moves = data\n    })\n\n    $selectExclude = $('#exclude-pokemon')\n    $selectPokemonNotify = $('#notify-pokemon')\n    $selectRarityNotify = $('#notify-rarity')\n    $textPerfectionNotify = $('#notify-perfection')\n    var numberOfPokemon = 493\n\n    // Load pokemon names and populate lists\n    $.getJSON('static/dist/data/pokemon.min.json').done(function (data) {\n        var pokeList = []\n\n        $.each(data, function (key, value) {\n            if (key > numberOfPokemon) {\n                return false\n            }\n            var _types = []\n            pokeList.push({\n                id: key,\n                text: i8ln(value['name']) + ' - #' + key\n            })\n            value['name'] = i8ln(value['name'])\n            value['rarity'] = i8ln(value['rarity'])\n            $.each(value['types'], function (key, pokemonType) {\n                _types.push({\n                    'type': i8ln(pokemonType['type']),\n                    'color': pokemonType['color']\n                })\n            })\n            value['types'] = _types\n            idToPokemon[key] = value\n        })\n\n        // setup the filter lists\n        $selectExclude.select2({\n            placeholder: i8ln('Select Pokmon'),\n            data: pokeList,\n            templateResult: formatState\n        })\n        $selectPokemonNotify.select2({\n            placeholder: i8ln('Select Pokmon'),\n            data: pokeList,\n            templateResult: formatState\n        })\n        $selectRarityNotify.select2({\n            placeholder: i8ln('Select Rarity'),\n            data: [i8ln('Common'), i8ln('Uncommon'), i8ln('Rare'), i8ln('Very Rare'), i8ln('Ultra Rare')],\n            templateResult: formatState\n        })\n\n        // setup list change behavior now that we have the list to work from\n        $selectExclude.on('change', function (e) {\n            buffer = excludedPokemon\n            excludedPokemon = $selectExclude.val().map(Number)\n            buffer = buffer.filter(function (e) {\n                return this.indexOf(e) < 0\n            }, excludedPokemon)\n            reincludedPokemon = reincludedPokemon.concat(buffer)\n            clearStaleMarkers()\n            Store.set('remember_select_exclude', excludedPokemon)\n        })\n        $selectPokemonNotify.on('change', function (e) {\n            notifiedPokemon = $selectPokemonNotify.val().map(Number)\n            Store.set('remember_select_notify', notifiedPokemon)\n        })\n        $selectRarityNotify.on('change', function (e) {\n            notifiedRarity = $selectRarityNotify.val().map(String)\n            Store.set('remember_select_rarity_notify', notifiedRarity)\n        })\n        $textPerfectionNotify.on('change', function (e) {\n            notifiedMinPerfection = parseInt($textPerfectionNotify.val(), 10)\n            if (isNaN(notifiedMinPerfection) || notifiedMinPerfection <= 0) {\n                notifiedMinPerfection = ''\n            }\n            if (notifiedMinPerfection > 100) {\n                notifiedMinPerfection = 100\n            }\n            $textPerfectionNotify.val(notifiedMinPerfection)\n            Store.set('remember_text_perfection_notify', notifiedMinPerfection)\n        })\n\n        // recall saved lists\n        $selectExclude.val(Store.get('remember_select_exclude')).trigger('change')\n        $selectPokemonNotify.val(Store.get('remember_select_notify')).trigger('change')\n        $selectRarityNotify.val(Store.get('remember_select_rarity_notify')).trigger('change')\n        $textPerfectionNotify.val(Store.get('remember_text_perfection_notify')).trigger('change')\n\n        if (isTouchDevice() && isMobileDevice()) {\n            $('.select2-search input').prop('readonly', true)\n        }\n    })\n\n    // run interval timers to regularly update map and timediffs\n    window.setInterval(updateLabelDiffTime, 1000)\n    window.setInterval(updateMap, 5000)\n    window.setInterval(updateGeoLocation, 1000)\n\n    createUpdateWorker()\n\n    // Wipe off/restore map icons when switches are toggled\n    function buildSwitchChangeListener(data, dataType, storageKey) {\n        return function () {\n            Store.set(storageKey, this.checked)\n            if (this.checked) {\n                // When switch is turned on we asume it has been off, makes sure we dont end up in limbo\n                // Without this there could've been a situation where no markers are on map and only newly modified ones are loaded\n                if (storageKey === 'showPokemon') {\n                    lastpokemon = false\n                } else if (storageKey === 'showGyms') {\n                    lastgyms = false\n                } else if (storageKey === 'showPokestops') {\n                    lastpokestops = false\n                } else if (storageKey === 'showScanned') {\n                    lastslocs = false\n                } else if (storageKey === 'showSpawnpoints') {\n                    lastspawns = false\n                }\n                updateMap()\n            } else {\n                $.each(dataType, function (d, dType) {\n                    $.each(data[dType], function (key, value) {\n                        // for any marker you're turning off, you'll want to wipe off the range\n                        if (data[dType][key].marker.rangeCircle) {\n                            data[dType][key].marker.rangeCircle.setMap(null)\n                            delete data[dType][key].marker.rangeCircle\n                        }\n                        if (storageKey !== 'showRanges') data[dType][key].marker.setMap(null)\n                    })\n                    if (storageKey !== 'showRanges') data[dType] = {}\n                })\n                if (storageKey === 'showRanges') {\n                    updateMap()\n                }\n            }\n        }\n    }\n\n    // Setup UI element interactions\n    $('#gyms-switch').change(function () {\n        var options = {\n            'duration': 500\n        }\n        var wrapper = $('#gym-sidebar-wrapper')\n        if (this.checked) {\n            lastgyms = false\n            wrapper.show(options)\n        } else {\n            lastgyms = false\n            wrapper.hide(options)\n        }\n        var wrapper2 = $('#gyms-filter-wrapper')\n        if (this.checked) {\n            lastgyms = false\n            wrapper2.show(options)\n        } else {\n            lastgyms = false\n            wrapper2.hide(options)\n        }\n        buildSwitchChangeListener(mapData, ['gyms'], 'showGyms').bind(this)()\n    })\n    $('#pokemon-switch').change(function () {\n        buildSwitchChangeListener(mapData, ['pokemons'], 'showPokemon').bind(this)()\n    })\n    $('#scanned-switch').change(function () {\n        buildSwitchChangeListener(mapData, ['scanned'], 'showScanned').bind(this)()\n    })\n    $('#spawnpoints-switch').change(function () {\n        buildSwitchChangeListener(mapData, ['spawnpoints'], 'showSpawnpoints').bind(this)()\n    })\n    $('#ranges-switch').change(buildSwitchChangeListener(mapData, ['gyms', 'pokemons', 'pokestops'], 'showRanges'))\n\n    $('#pokestops-switch').change(function () {\n        var options = {\n            'duration': 500\n        }\n        var wrapper = $('#lured-pokestops-only-wrapper')\n        if (this.checked) {\n            lastpokestops = false\n            wrapper.show(options)\n        } else {\n            lastpokestops = false\n            wrapper.hide(options)\n        }\n        return buildSwitchChangeListener(mapData, ['pokestops'], 'showPokestops').bind(this)()\n    })\n\n    $('#sound-switch').change(function () {\n        Store.set('playSound', this.checked)\n    })\n\n    $('#start-at-user-location-switch').change(function () {\n        Store.set('startAtUserLocation', this.checked)\n        if (this.checked === true && Store.get('startAtLastLocation') === true) {\n            Store.set('startAtLastLocation', false)\n            $('#start-at-last-location-switch').prop('checked', false)\n        }\n    })\n\n    $('#start-at-last-location-switch').change(function () {\n        Store.set('startAtLastLocation', this.checked)\n        if (this.checked === true && Store.get('startAtUserLocation') === true) {\n            Store.set('startAtUserLocation', false)\n            $('#start-at-user-location-switch').prop('checked', false)\n        }\n    })\n\n    $('#follow-my-location-switch').change(function () {\n        if (!navigator.geolocation) {\n            this.checked = false\n        } else {\n            Store.set('followMyLocation', this.checked)\n        }\n        locationMarker.setDraggable(!this.checked)\n    })\n\n    if ($('#nav-accordion').length) {\n        $('#nav-accordion').accordion({\n            active: 0,\n            collapsible: true,\n            heightStyle: 'content'\n        })\n    }\n\n    // Initialize dataTable in statistics sidebar\n    //   - turn off sorting for the 'icon' column\n    //   - initially sort 'name' column alphabetically\n\n    $('#pokemonList_table').DataTable({\n        paging: false,\n        searching: false,\n        info: false,\n        errMode: 'throw',\n        'language': {\n            'emptyTable': ''\n        },\n        'columns': [{'orderable': false}, null, null, null]\n    }).order([1, 'asc'])\n})\n"]}